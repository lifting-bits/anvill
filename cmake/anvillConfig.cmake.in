#
# Copyright (c) 2021-present, Trail of Bits, Inc.
# All rights reserved.
#
# This source code is licensed in accordance with the terms specified in
# the LICENSE file found in the root directory of this source tree.
#

cmake_minimum_required(VERSION 3.2)

if(NOT TARGET anvill)
  if(WIN32)
    set(ANVILL_LIBRARY_LOCATION "${CMAKE_INSTALL_PREFIX}/lib/anvill-${REMILL_LLVM_VERSION}.lib")
    set(ANVILL_INCLUDE_LOCATION "${CMAKE_INSTALL_PREFIX}/include")
  else()
    set(ANVILL_LIBRARY_LOCATION "${CMAKE_INSTALL_PREFIX}/lib/libanvill-${REMILL_LLVM_VERSION}.a")
    set(ANVILL_INCLUDE_LOCATION "${CMAKE_INSTALL_PREFIX}/include")
  endif()

  add_library(anvill STATIC IMPORTED)
  set_property(TARGET anvill PROPERTY IMPORTED_LOCATION "$${}{ANVILL_LIBRARY_LOCATION}")
  set_property(TARGET anvill PROPERTY INTERFACE_INCLUDE_DIRECTORIES "$${}{ANVILL_INCLUDE_LOCATION}")

  add_library(anvill-${REMILL_LLVM_VERSION} STATIC IMPORTED)
  set_property(TARGET anvill-${REMILL_LLVM_VERSION} PROPERTY IMPORTED_LOCATION "$${}{ANVILL_LIBRARY_LOCATION}")
  set_property(TARGET anvill-${REMILL_LLVM_VERSION} PROPERTY INTERFACE_INCLUDE_DIRECTORIES "$${}{ANVILL_INCLUDE_LOCATION}")
endif()
